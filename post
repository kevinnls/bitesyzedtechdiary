#!/bin/sh

[ -n "${DEBUG}" ] && set -x

_postpattern="_posts/$(date +'%Y-%m-%d-*.md')"

if [ -z "${post}" ]; then
    post=$(find _posts/ -name "${_postpattern##*/}")
fi

if [ -z "${post}" ]; then
    read -p "NAME/SLUG REQUIRED: " slug
    post="${post/\*/${slug}}"
fi

"${EDITOR:-vi}" "${post}"
